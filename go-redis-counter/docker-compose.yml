version: '3.8'

services:
  # 1. ë ˆë””ìŠ¤ (ë°ì´í„°ë² ì´ìŠ¤)
  redis-db:                # ğŸ‘ˆ ì´ ì´ë¦„ì´ í˜¸ìŠ¤íŠ¸ë„¤ì„ì´ ë©ë‹ˆë‹¤!
    image: redis:alpine
    container_name: redis-db
    networks:
      - my-net

  # 2. ë‹˜ì˜ Go ì•±
  app:
    image: hyxnminp/go-redis-counter:latest
    container_name: my-app
    ports:
      - "8080:8080"        # ì™¸ë¶€ 8080 <-> ë‚´ë¶€ 8080 ì—°ê²°
    environment:
      - REDIS_ADDR=redis-db:6379  # ğŸ‘ˆ ì˜†ë°© ì´ë¦„(redis-db)ì„ ì•Œë ¤ì¤Œ
    depends_on:
      - redis-db           # Redisê°€ ì¼œì§„ ë’¤ì— ì‹¤í–‰í•˜ë¼ëŠ” ëœ»
    networks:
      - my-net

# 3. ê°€ìƒì˜ ì™€ì´íŒŒì´ë§ ì •ì˜
networks:
  my-net:
    driver: bridge